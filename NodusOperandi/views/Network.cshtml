@{
	Layout = "Layout.cshtml";
}

ï»¿@section ContentTitle {
	<h1>Network configuration <small>Control panel</small></h1>
}

@section Breadcrumb {
	<ol class="breadcrumb">
	    <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
	    <li class="active">
	        Network configuration
	    </li>
	</ol>
}

@section Scripts {

	<script type="text/javascript">
	// <!--[CDATA[

	$(function() {
		ko.applyBindings(new NetworkViewModel());
	});

	function NetworkModel(data) {
		var self = this

		self.name = data.name;
		self.createdAt = data.createdAt;
		self.lastModifiedAt = data.lastModifiedAt;
		self.isActive = data.isActive;
		self.isDeleted = data.isDeleted;
		self.ipSubnet = data.ipSubnet;
		self.type = self.type;
		self.hasDhcp = data.hasDhcp;
		self.dhcpStartAddress = data.dhcpStartAddress;
		self.dhcpEndAddress = data.dhcpEndAddress;
		self.wiFiSecurityLevel = data.wiFiSecurityLevel;
		self.wiFiPassword = data.wiFiPassword;
		self.hasGuestPortal = data.hasGuestPortal;
		self.guestPortalAddress = data.guestPortalAddress;
	};

	function NetworkViewModel() {
		var self = this;

		self.networks = ko.observableArray();

		$.getJSON("/api/network", function (response) {
			var mapped = $.map(response, function (device) {
				return new NetworkModel(device);
			});
			self.networks(mapped);
		});
	};

	// ]]-->
	</script>

}

<div class="btn-group btn-group-sm margin" role="group">
    <button type="button" class="btn btn-default active">All</button>
    <button type="button" class="btn btn-default">Wired</button>
    <button type="button" class="btn btn-default">Wireless</button>
    <button type="button" class="btn btn-default">VPN</button>
</div>
<table class="table table-striped">
    <thead>
        <tr>
            <th>&#xa0;</th>
            <th>Name</th>
            <th>IP / Subnet</th>
            <th>DHCP</th>
            <th>Security</th>
            <th>Guest portal?</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="7">&#xa0;</td>
        </tr>
    </tfoot>
    <tbody data-bind="visible: !networks().length">
    	<tr>
    		<td colspan="7">There are no networks managed by this controller.</td>
    	</tr>
    </tbody>
    <tbody data-bind="foreach: networks, visible: networks().length">
		<tr data-bind="ellipsis: true">
            <td><span class="fa fa-wifi"></span></td>
            <td><a href="#" data-bind="text: name"></a></td>
            <td data-bind="text: ipSubnet"></td>
            <td data-bind="text: (hasDhcp ? dhcpStartAddress + '&#x2014;' + dhcpEndAddress : '&#x2014;')"></td>
            <td data-bind="text: wiFiSecurityLevel"></td>
            <td data-bind="text: (hasGuestPortal ? guestPortalAddress : '&#x2014;'"></td>
            <td class="actions"><button class="btn btn-warning"><span class="fa fa-compass"></span> Locate</button></td>
		</tr>
	</tbody>
</table>
<div class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<form>
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Add a network</h4>
				</div>
				<div class="modal-body">
					<div class="form-group">
						<label for="new_network_name">Network name / SSID</label>
						<input type="text" class="form-control" id="new_network_name" placeholder="My New Network">
					</div>
					<div class="form-group">
						<label>Network type</label>
						<div class="btn-group btn-group-sm margin" role="group">
						    <button type="button" class="btn btn-default active">Wired</button>
						    <button type="button" class="btn btn-default">Wireless</button>
						    <button type="button" class="btn btn-default">VPN</button>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary" id="save_new_network">Save changes</button>
				</div>
			</div><!-- /.modal-content -->
		</form>
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->